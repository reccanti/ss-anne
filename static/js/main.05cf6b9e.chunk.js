(this["webpackJsonpss-anne"]=this["webpackJsonpss-anne"]||[]).push([[0],{101:function(e,n,t){},126:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=126},139:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(13),o=t.n(c),u=(t(101),t(12)),i=t(85),s=t(183),l=t(184),d=t(185),f=t(187),m=t(190),j=t(186),b=t(15),p=t(19),O=t(9),h=t(3),x={user:null,board:{name:"",columns:15,game:{id:"red",name:"Red",generation:"generation-i",pokedex:[]},generation:{id:1,name:"Generation I"},pokedex:{id:"kanto",name:"Kanto",pokemon:[]},pokemon:[]},peerjs:null};function g(e,n){switch(n.type){case"setUser":return Object(O.a)(Object(O.a)({},e),{},{user:{name:n.payload.name}});case"setBoardColumns":return Object(O.a)(Object(O.a)({},e),{},{board:Object(O.a)(Object(O.a)({},e.board),{},{columns:n.payload.columns})});case"setBoardName":return Object(O.a)(Object(O.a)({},e),{},{board:Object(O.a)(Object(O.a)({},e.board),{},{name:n.payload.name})});case"setBoardGeneration":return Object(O.a)(Object(O.a)({},e),{},{board:Object(O.a)(Object(O.a)({},e.board),{},{generation:Object(O.a)({},n.payload)})});case"setBoardGame":return Object(O.a)(Object(O.a)({},e),{},{board:Object(O.a)(Object(O.a)({},e.board),{},{game:Object(O.a)({},n.payload)})});case"setBoardPokemon":return Object(O.a)(Object(O.a)({},e),{},{board:Object(O.a)(Object(O.a)({},e.board),{},{pokemon:Object(p.a)(n.payload)})});case"setBoardPokedex":return Object(O.a)(Object(O.a)({},e),{},{board:Object(O.a)(Object(O.a)({},e.board),{},{pokedex:Object(O.a)({},n.payload)})});case"setPeerJS":return Object(O.a)(Object(O.a)({},e),{},{peerjs:n.payload});case"clear":return x;default:return e}}var v={state:x,dispatch:function(){}},k=Object(r.createContext)(v);function y(e){var n=e.children,t=Object(r.useReducer)(g,x),a=Object(b.a)(t,2),c={state:a[0],dispatch:a[1]};return Object(h.jsx)(k.Provider,{value:c,children:n})}var w=t(43),C=t(29),P=t(7),S=t.n(P),N=t(14),E=t(31),M=t.n(E),G=t(52),B=t.n(G);function D(e){return V.apply(this,arguments)}function V(){return(V=Object(N.a)(S.a.mark((function e(n){var t,r,a,c,o,u,i,s,l,d=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=d.length>1&&void 0!==d[1]?d[1]:25,r=[],a=0;a<n.length;)c=n.slice(a,a+t),r.push(c),a+=t;o=[],u=0,i=r;case 6:if(!(u<i.length)){e.next=15;break}return s=i[u],e.next=10,Promise.allSettled(s);case 10:l=e.sent,o=o.concat(l);case 12:u++,e.next=6;break;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function(){function e(n,t){Object(w.a)(this,e),this.key=void 0,this.handler=void 0,this.key=n,this.handler=t}return Object(C.a)(e,[{key:"mkKey",value:function(e){return"".concat(this.key,".").concat(e)}},{key:"get",value:function(){var e=Object(N.a)(S.a.mark((function e(n){var t,r,a,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.mkKey(n),!(r=localStorage.getItem(t))){e.next=5;break}return a=JSON.parse(r),e.abrupt("return",a);case 5:return e.next=7,this.handler(n);case 7:if(!(c=e.sent)){e.next=11;break}return localStorage.setItem(t,JSON.stringify(c)),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}]),e}(),_=new W("pokemon",function(){var e=Object(N.a)(S.a.mark((function e(n){var t,r,a,c,o,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.PokemonSpecies.resolve(n);case 2:return t=e.sent,r=t.varieties.find((function(e){return e.is_default})),e.next=6,M.a.Pokemon.resolve(r.pokemon.name);case 6:return a=e.sent,c=a.id,o=a.sprites.front_default,u=t.names.reduce((function(e,n){return e[n.language.name]=n.name,e}),{}),e.abrupt("return",{id:n,nationalDexNumber:c,artworkUrl:o,names:u});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),A=new W("games",function(){var e=Object(N.a)(S.a.mark((function e(n){var t,r,a,c,o,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.Version.resolve(n);case 2:return t=e.sent,e.next=5,M.a.VerionGroup.resolve(t.version_group.name);case 5:return r=e.sent,a=t.name,c=t.names.reduce((function(e,n){return e[n.language.name]=n.name,e}),{}),o=r.pokedexes.map((function(e){return e.name})),u=r.generation.name,e.abrupt("return",{id:a,names:c,pokedex:o,generation:u});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),J=B()(function(){var e=Object(N.a)(S.a.mark((function e(n){var t,r,a,c,o,u,i,s,l,d,f,m,j,b;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.Generaition.resolve(n);case 2:return t=e.sent,r=t.version_groups.map((function(e){return M.a.VerionGroup.resolve(e.name)})),e.next=6,Promise.all(r);case 6:return a=e.sent,c=a.flatMap((function(e){return e.pokedexes.map((function(e){return U.get(e.name)}))})),e.next=10,Promise.all(c);case 10:return o=e.sent,u=new Set,o.forEach((function(e){e.pokemon.forEach((function(e){u.add(e)}))})),i=new Map,s=Array.from(u).map((function(e){return _.get(e)})),e.next=17,D(s,100);case 17:return l=e.sent,d=l.filter((function(e){return"fulfilled"===e.status})),d.map((function(e){return e.value})).forEach((function(e){i.set(e.id,e.nationalDexNumber)})),e.next=23,U.get("national");case 23:return f=e.sent,m=f.names,j=Array.from(u).sort((function(e,n){var t=i.get(e),r=i.get(n);return t>r?1:t<r?-1:0})),b="national/".concat(n),e.abrupt("return",{names:m,pokemon:j,id:b});case 28:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),U=new W("pokedex",function(){var e=Object(N.a)(S.a.mark((function e(n){var t,r,a,c,o,u,i,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.includes("national/")){e.next=6;break}return t=n.split("/"),r=Object(b.a)(t,2),a=r[1],c=J(a),e.abrupt("return",c);case 6:return e.next=8,M.a.Pokedex.resolve(n);case 8:return o=e.sent,u=o.name,i=o.names.reduce((function(e,n){return e[n.language.name]=n.name,e}),{}),(s=o.pokemon_entries.map((function(e){return{name:e.pokemon_species.name,num:e.entry_number}}))).sort((function(e,n){return e.num>n.num?1:e.num<n.num?-1:0})),l=s.map((function(e){return e.name})),e.abrupt("return",{id:u,names:i,pokemon:l});case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),T=B()(function(){var e=Object(N.a)(S.a.mark((function e(n,t){var r,a,c,o,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.get(t);case 2:return r=e.sent,a=r.pokemon.map((function(e){return _.get(e)})),e.next=6,D(a,50);case 6:return c=e.sent,o=c.filter((function(e){return"fulfilled"===e.status&&!!e.value})),u=o.map((function(e){return e.value})),e.abrupt("return",u.map((function(e){return{id:e.id,name:e.names[n],artworkUrl:e.artworkUrl,nationalDexNumber:e.nationalDexNumber}})));case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),I=B()(function(){var e=Object(N.a)(S.a.mark((function e(n){var t,r,a,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.Version.listAll();case 2:return t=e.sent,r=t.results.map((function(e){return A.get(e.name)})),e.next=6,Promise.all(r);case 6:return a=e.sent,c=a.filter((function(e){return!!e})),e.abrupt("return",c.filter((function(e){return e.pokedex.length>0})).filter((function(e){return Object.keys(e.names).length>0})).map((function(e){return{id:e.id,name:e.names[n],generation:e.generation,pokedex:e.pokedex}})));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),F=B()(function(){var e=Object(N.a)(S.a.mark((function e(n,t){var r,a,c,o,u,i,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get(t);case 2:return r=e.sent,a=r.pokedex,c=a.map((function(e){return U.get(e)})),e.next=7,Promise.all(c);case 7:return o=e.sent,u=o.filter((function(e){return!!e})),i=u.map((function(e){return{id:e.id,name:e.names[n],pokemon:e.pokemon}})),e.next=12,J(r.generation);case 12:return s=e.sent,l={name:s.names[n],id:s.id,pokemon:s.pokemon},e.abrupt("return",[l].concat(Object(p.a)(i)));case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),K=function(){function e(n){var t=n.lang,r=void 0===t?"en":t;Object(w.a)(this,e),this.language=void 0,this.language=r}return Object(C.a)(e,[{key:"getAllGames",value:function(){var e=Object(N.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(this.language);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPokedexByGame",value:function(){var e=Object(N.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(this.language,n.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"getPokemonByPokedex",value:function(){var e=Object(N.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(this.language,n.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}]),e}(),L=new K({lang:"en"}),R=Object(r.createContext)(L);function z(e){var n=Object(r.useState)(new K({lang:e.lang})),t=Object(b.a)(n,2),a=t[0],c=t[1];return Object(r.useEffect)((function(){c(new K({lang:e.lang}))}),[e.lang]),Object(h.jsx)(R.Provider,{value:a,children:e.children})}var q=t(174),H=t(179),Q=t(87),X=t(195),Y=t(169),Z=t(192),$=t(172),ee=t(178),ne=t(82),te=t.n(ne);var re=function(){var e=Object(r.createContext)(void 0);return[function(){var n=Object(r.useContext)(e);if(!n)throw new Error("useCtx must be inside a Provider with a value");return n},e.Provider]}(),ae=Object(b.a)(re,2),ce=ae[0],oe=ae[1],ue=ce;function ie(e){var n=e.children,t=e.context;return Object(h.jsx)(oe,{value:t,children:n})}var se=Object(r.createContext)({status:"uninitialized"});function le(e){var n=e.children,t=Object(r.useRef)(),a=Object(r.useState)(null),c=Object(b.a)(a,2),o=c[0],u=c[1],i=Object(r.useMemo)((function(){return new Map}),[]),s=Object(r.useMemo)((function(){return new Set}),[]),l=Object(r.useMemo)((function(){return new Set}),[]),d=Object(r.useMemo)((function(){return new Set}),[]),f=Object(r.useMemo)((function(){return new Set}),[]),m=Object(r.useMemo)((function(){return function(e){return s.add(e)}}),[s]),j=Object(r.useMemo)((function(){return function(e){return l.add(e)}}),[l]),p=Object(r.useMemo)((function(){return function(e){return f.add(e)}}),[f]),O=Object(r.useMemo)((function(){return function(e){return d.add(e)}}),[d]),x=Object(r.useMemo)((function(){return function(e,n){var t=i.get(e);t&&t.send(n)}}),[i]),g=Object(r.useMemo)((function(){return function(e){Array.from(i.values()).forEach((function(n){n.send(e)}))}}),[i]),v=Object(r.useMemo)((function(){return function(e){return i.has(e)}}),[i]),k=Object(r.useMemo)((function(){return function(){var e=Object(N.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.current){e.next=2;break}throw Error("PeerJS must be initialized!!!");case 2:return r=t.current.connect(n),e.abrupt("return",new Promise((function(e,n){r.on("open",(function(){v(r.peer)||(i.set(r.peer,r),r.on("data",(function(e){console.log("that's a data..."),l.forEach((function(n){n(e)}))})),e(r))})),r.on("error",(function(e){n(e)}))})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),[l,v,i]);Object(r.useEffect)((function(){var e=new te.a;e.on("open",(function(e){u(e),s.forEach((function(n){n(e)}))})),e.on("connection",(function(e){console.log("someone wants to connect to me \u2764\ufe0f"),v(e.peer)||(i.set(e.peer,e),e.on("data",(function(e){console.log("that's a data..."),l.forEach((function(n){n(e)}))})),f.forEach((function(n){n(e)})))})),e.on("error",(function(e){d.forEach((function(n){n(e)}))})),t.current=e}),[s,f,d,l,i,v]);var y={status:"uninitialized"};return t.current&&o&&(y={status:"ready",context:{registerOnConnect:p,registerOnData:j,registerOnError:O,registerOnOpen:m,connect:k,isConnected:v,messageAll:g,messageById:x,id:o}}),Object(h.jsx)(se.Provider,{value:y,children:n})}var de=t(189),fe=t(194);function me(e){var n,t=new Map;e.data.forEach((function(n){t.set(e.getValue(n),n)}));return Object(h.jsxs)(Y.a,{fullWidth:null!==(n=e.fullWidth)&&void 0!==n&&n,children:[Object(h.jsx)(Z.a,{htmlFor:e.id,children:e.label}),Object(h.jsx)(de.a,{id:e.id,value:e.getValue(e.value),onChange:function(n){var r=n.target.value,a=t.get(r);e.onChange(a)},children:e.data.map((function(n){return Object(h.jsx)(fe.a,{value:e.getValue(n),children:e.getDisplayValue(n)},e.getKeyValue(n))}))})]})}var je=t(175),be=t(59),pe=t(176),Oe=t(83),he=Object(q.a)({root:{display:"block",background:function(e){switch(e.variant){case"ship-unhit":return je.a[500];case"ship-hit":return be.a[500];case"miss":return pe.a[50];default:return"transparent"}}},image:{display:"block"}});function xe(e){var n=e.variant,t=e.onClick,r=e.children,a=he({variant:n});return Object(h.jsx)("li",{className:a.root,onClick:t,children:r})}var ge=Object(q.a)({root:{display:"grid",gridTemplateColumns:function(e){return"repeat(".concat(e.columns,", max-content)")},listStyle:"none",padding:0}});function ve(e){var n=e.columns,t=e.items,r=e.renderCell,a=ge({columns:n});return Object(h.jsx)("ol",{className:a.root,children:t.map((function(e){return r(e)}))})}var ke=Object(q.a)({root:{width:"100%",height:"100vh",overflow:"scroll"}});function ye(e){var n=e.children,t=ke();return Object(h.jsx)(Oe.a,{className:t.root,children:n})}var we=t(177),Ce=Object(q.a)({root:{padding:"1rem",margin:"1rem","& *:not(:first-child)":{marginTop:"1rem"}}});function Pe(e){var n=Ce(),t=Object(r.useContext)(k).dispatch,a=Object(r.useState)({name:""}),c=Object(b.a)(a,2),o=c[0],u=c[1];return Object(h.jsx)(we.a,{fixed:!0,maxWidth:"sm",children:Object(h.jsx)(Q.a,{className:n.root,children:Object(h.jsxs)("form",{onSubmit:function(n){n.preventDefault(),e.onSubmit&&e.onSubmit({name:o.name}),t({type:"setUser",payload:{name:o.name}}),t({type:"setBoardName",payload:{name:"".concat(o.name,"'s board")}})},children:[Object(h.jsx)(X.a,{label:"Display Name",onChange:function(n){e.onNameChange&&e.onNameChange(n.target.value),u(Object(O.a)(Object(O.a)({},o),{},{name:n.target.value}))},value:o.name,fullWidth:!0}),Object(h.jsx)(ee.a,{type:"submit",fullWidth:!0,children:"Get Started"})]})})})}var Se=Object(q.a)({root:{padding:"1rem",maxWidth:"350px",margin:"1rem","& form > *:not(:first-child)":{marginTop:"1rem"}},image:{pointerEvents:"none"}});function Ne(){var e=Object(r.useState)([]),n=Object(b.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)([]),o=Object(b.a)(c,2),i=o[0],s=o[1],l=Object(r.useContext)(k),d=l.state,f=l.dispatch,m=Object(r.useContext)(R),j=Object(u.f)(),p=ue();Object(r.useEffect)((function(){(function(){var e=Object(N.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getAllGames();case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[m]),Object(r.useEffect)((function(){(function(){var e=Object(N.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getPokedexByGame(d.board.game);case 2:n=e.sent,s(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[m,f,d.board.game]),Object(r.useEffect)((function(){(function(){var e=Object(N.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getPokemonByPokedex(d.board.pokedex);case 2:n=e.sent,f({type:"setBoardPokemon",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[m,f,d.board.pokedex]);return Object(h.jsx)(Ee,{curName:d.board.name,curColumn:d.board.columns,curGame:d.board.game,curPokedex:d.board.pokedex,curPokemon:d.board.pokemon,games:t,pokedex:i,onNameChange:function(e){var n=e.target.value;f({type:"setBoardName",payload:{name:n}})},onColumnChange:function(e){var n=Number(e.target.value);f({type:"setBoardColumns",payload:{columns:n}})},onGameChange:function(e){f({type:"setBoardGame",payload:e})},onPokedexChange:function(e){f({type:"setBoardPokedex",payload:e})},onSubmit:function(e){e.preventDefault(),p.id&&j.push("/".concat(p.id))}})}function Ee(e){var n=Se();return Object(h.jsxs)(H.a,{container:!0,children:[Object(h.jsx)(H.a,{container:!0,item:!0,xs:2,children:Object(h.jsx)(Q.a,{className:n.root,children:Object(h.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(h.jsx)(X.a,{fullWidth:!0,label:"Board Name",onChange:e.onNameChange,value:e.curName}),Object(h.jsxs)(Y.a,{fullWidth:!0,children:[Object(h.jsx)(Z.a,{htmlFor:"column-input",children:"Columns"}),Object(h.jsx)($.a,{id:"column-input",type:"number",onChange:e.onColumnChange,value:e.curColumn})]}),Object(h.jsx)(me,{id:"game-select",label:"Game",fullWidth:!0,data:e.games,value:e.curGame,getDisplayValue:function(e){return e.name},getKeyValue:function(e){return e.id},getValue:function(e){return e.id},onChange:e.onGameChange}),Object(h.jsx)(me,{id:"pokedex-select",label:"Pokedex",fullWidth:!0,data:e.pokedex,value:e.curPokedex,getDisplayValue:function(e){return e.name},getKeyValue:function(e){return e.id},getValue:function(e){return e.id},onChange:e.onPokedexChange}),Object(h.jsx)(ee.a,{type:"submit",fullWidth:!0,children:"Get Started!"})]})})}),Object(h.jsx)(H.a,{container:!0,item:!0,xs:10,children:Object(h.jsx)(ye,{children:Object(h.jsx)(ve,{columns:e.curColumn,items:e.curPokemon,renderCell:function(e){return Object(h.jsx)(xe,{variant:"unknown",children:Object(h.jsx)("img",{className:n.image,src:e.artworkUrl,alt:e.name})},e.name)}})})})]})}function Me(){return Object(r.useContext)(k).state.user?Object(h.jsx)(Ne,{}):Object(h.jsx)(Pe,{})}var Ge=t(180),Be=t(181),De=t(182),Ve=t(84),We=t.n(Ve);var _e=Object(q.a)((function(e){return{root:{padding:e.spacing(4),"& > *:not(:first-child)":{marginTop:e.spacing(2)}},button:{margin:e.spacing(1),marginLeft:e.spacing(4)},cardGrid:{marginTop:e.spacing(2)},card:{width:"100%"}}}));function Ae(e){var n=_e();return Object(h.jsxs)(we.a,{className:n.root,children:[Object(h.jsxs)(m.a,{component:"section",children:[Object(h.jsxs)(m.a,{display:"flex",children:[Object(h.jsx)(Ge.a,{variant:"h3",component:"h1",children:"Players"}),Object(h.jsx)(ee.a,{className:n.button,color:"primary",variant:"contained",startIcon:Object(h.jsx)(We.a,{}),children:"Join"})]}),Object(h.jsx)(H.a,{className:n.cardGrid,container:!0,children:Object(h.jsx)(H.a,{container:!0,item:!0,xs:2,children:Object(h.jsx)(Be.a,{className:n.card,children:Object(h.jsx)(De.a,{children:"Testing..."})})})})]}),Object(h.jsxs)(m.a,{component:"section",children:[Object(h.jsx)(m.a,{display:"flex",children:Object(h.jsx)(Ge.a,{variant:"h3",component:"h1",children:"Hanging Out"})}),Object(h.jsx)(H.a,{className:n.cardGrid,container:!0,children:e.waitingUsers.map((function(e,t){return Object(h.jsx)(H.a,{container:!0,item:!0,xs:2,children:Object(h.jsx)(Be.a,{className:n.card,children:Object(h.jsx)(De.a,{children:e})})},"".concat(e,"_").concat(t))}))})]}),Object(h.jsx)(m.a,{children:Object(h.jsx)(ee.a,{fullWidth:!0,variant:"contained",color:"primary",children:"Start Game"})})]})}function Je(){var e=Object(r.useState)([]),n=Object(b.a)(e,2),t=n[0],a=n[1],c=Object(r.useMemo)((function(){return function(e){a((function(n){return[].concat(Object(p.a)(n),[e])}))}}),[]),o=ue(),i=o.id,s=o.connect,l=o.isConnected,d=Object(u.g)().peer_id,f=Object(r.useContext)(k).state,m=function(){var e=Object(r.useMemo)((function(){return new Set}),[]),n=ue(),t=n.registerOnError,a=n.registerOnData,c=n.messageById,o=Object(r.useMemo)((function(){return function(e,n){return c(e,n)}}),[c]),u=Object(r.useMemo)((function(){return function(n){console.log(e.size),e.add(n)}}),[e]);return Object(r.useEffect)((function(){t((function(e){console.log(e)})),a((function(n){var t=function(e){if(e&&e.type)switch(e.type){case"requestJoin":case"joinReceived":return e}return null}(n);console.log("that's an action!!!"),t&&e.forEach((function(e){e(t)}))}))}),[e,a,t]),{registerActionListener:u,sendAction:o}}(),j=m.sendAction,O=m.registerActionListener;return Object(r.useEffect)((function(){O((function(e){switch(e.type){case"joinReceived":c(e.payload.name);break;case"requestJoin":c(e.payload.name),f.user&&j(e.id,{type:"joinReceived",id:i,payload:{name:f.user.name}})}}))}),[O,c,i,j,f.user]),Object(r.useEffect)((function(){(function(){var e=Object(N.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f.user||d===i){e.next=8;break}if(l(d)){e.next=8;break}return e.next=5,s(d);case 5:n=e.sent,console.log("sending the action..."),j(n.peer,{type:"requestJoin",id:i,payload:{name:f.user.name}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[j,s,i,l,d,f.user]),f.user?Object(h.jsx)(Ae,{waitingUsers:t}):Object(h.jsx)(Pe,{onSubmit:function(e){var n=e.name;j(d,{type:"requestJoin",id:i,payload:{name:n}})}})}function Ue(){var e=Object(r.useContext)(k).dispatch,n=Object(u.f)();return Object(h.jsx)(s.a,{position:"static",children:Object(h.jsx)(l.a,{children:Object(h.jsx)(d.a,{onClick:function(){e({type:"clear"}),n.push("/")},children:Object(h.jsx)(j.a,{})})})})}function Te(){var e=Object(r.useContext)(se);return"uninitialized"===e.status?Object(h.jsx)(f.a,{}):Object(h.jsx)(ie,{context:e.context,children:Object(h.jsx)(y,{children:Object(h.jsx)(z,{lang:"en",children:Object(h.jsx)(m.a,{children:Object(h.jsxs)(i.a,{basename:"/ss-anne",children:[Object(h.jsx)(Ue,{}),Object(h.jsxs)(u.c,{children:[Object(h.jsx)(u.a,{exact:!0,path:"/",children:Object(h.jsx)(Me,{})}),Object(h.jsx)(u.a,{exact:!0,path:"/:peer_id",children:Object(h.jsx)(Je,{})})]})]})})})})})}var Ie=function(){return Object(h.jsx)(le,{children:Object(h.jsx)(Te,{})})},Fe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,197)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),c(e),o(e)}))},Ke=t(191),Le=t(188);o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsxs)(Ke.b,{children:[Object(h.jsx)(Le.a,{}),Object(h.jsx)(Ie,{})]})}),document.getElementById("root")),Fe()}},[[139,1,2]]]);
//# sourceMappingURL=main.05cf6b9e.chunk.js.map
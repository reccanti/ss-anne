(this["webpackJsonpss-anne"]=this["webpackJsonpss-anne"]||[]).push([[0],{117:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=117},127:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),i=n.n(c),u=n(6),s=n.n(u),o=n(11),l=n(10),f=n(13),p=n(75),d=n(168),b=n(169),j=n(170),h=n(174),m=n(162),v=n(171),O=n(8),g=n(2),x={user:null};function k(e,t){switch(t.type){case"setUser":return Object(O.a)(Object(O.a)({},e),{},{user:Object(O.a)({},t.user)});case"clear":return x;default:return e}}var y={state:x,dispatch:function(){}},w=Object(r.createContext)(y),C=function(){return Object(r.useContext)(w)};function S(e){var t=e.children,n=Object(r.useReducer)(k,x),a=Object(l.a)(n,2),c={state:a[0],dispatch:a[1]};return Object(g.jsx)(w.Provider,{value:c,children:t})}var P=n(28),D=n(23),E=n(18),N=n(27),B=n.n(N),G=n(45),T=n.n(G);function W(e){return M.apply(this,arguments)}function M(){return(M=Object(o.a)(s.a.mark((function e(t){var n,r,a,c,i,u,o,l,f,p=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=p.length>1&&void 0!==p[1]?p[1]:25,r=[],a=0;a<t.length;)c=t.slice(a,a+n),r.push(c),a+=n;i=[],u=0,o=r;case 6:if(!(u<o.length)){e.next=15;break}return l=o[u],e.next=10,Promise.allSettled(l);case 10:f=e.sent,i=i.concat(f);case 12:u++,e.next=6;break;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(){function e(t,n){Object(P.a)(this,e),this.key=void 0,this.handler=void 0,this.key=t,this.handler=n}return Object(D.a)(e,[{key:"mkKey",value:function(e){return"".concat(this.key,".").concat(e)}},{key:"get",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.mkKey(t),!(r=localStorage.getItem(n))){e.next=5;break}return a=JSON.parse(r),e.abrupt("return",a);case 5:return e.next=7,this.handler(t);case 7:if(!(c=e.sent)){e.next=11;break}return localStorage.setItem(n,JSON.stringify(c)),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),U=new V("pokemon",function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,c,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.PokemonSpecies.resolve(t);case 2:return n=e.sent,r=n.varieties.find((function(e){return e.is_default})),e.next=6,B.a.Pokemon.resolve(r.pokemon.name);case 6:return a=e.sent,c=a.id,i=a.sprites.front_default,u=n.names.reduce((function(e,t){return e[t.language.name]=t.name,e}),{}),e.abrupt("return",{id:t,nationalDexNumber:c,artworkUrl:i,names:u});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=new V("games",function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,c,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.Version.resolve(t);case 2:return n=e.sent,e.next=5,B.a.VerionGroup.resolve(n.version_group.name);case 5:return r=e.sent,a=n.name,c=n.names.reduce((function(e,t){return e[t.language.name]=t.name,e}),{}),i=r.pokedexes.map((function(e){return e.name})),u=r.generation.name,e.abrupt("return",{id:a,names:c,pokedex:i,generation:u});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=T()(function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,c,i,u,o,l,f,p,d,b,j,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.Generaition.resolve(t);case 2:return n=e.sent,r=n.version_groups.map((function(e){return B.a.VerionGroup.resolve(e.name)})),e.next=6,Promise.all(r);case 6:return a=e.sent,c=a.flatMap((function(e){return e.pokedexes.map((function(e){return L.get(e.name)}))})),e.next=10,Promise.all(c);case 10:return i=e.sent,u=new Set,i.forEach((function(e){e.pokemon.forEach((function(e){u.add(e)}))})),o=new Map,l=Array.from(u).map((function(e){return U.get(e)})),e.next=17,W(l,100);case 17:return f=e.sent,p=f.filter((function(e){return"fulfilled"===e.status})),p.map((function(e){return e.value})).forEach((function(e){o.set(e.id,e.nationalDexNumber)})),e.next=23,L.get("national");case 23:return d=e.sent,b=d.names,j=Array.from(u).sort((function(e,t){var n=o.get(e),r=o.get(t);return n>r?1:n<r?-1:0})),h="national/".concat(t),e.abrupt("return",{names:b,pokemon:j,id:h});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=new V("pokedex",function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,c,i,u,o,f,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.includes("national/")){e.next=6;break}return n=t.split("/"),r=Object(l.a)(n,2),a=r[1],c=I(a),e.abrupt("return",c);case 6:return e.next=8,B.a.Pokedex.resolve(t);case 8:return i=e.sent,u=i.name,o=i.names.reduce((function(e,t){return e[t.language.name]=t.name,e}),{}),(f=i.pokemon_entries.map((function(e){return{name:e.pokemon_species.name,num:e.entry_number}}))).sort((function(e,t){return e.num>t.num?1:e.num<t.num?-1:0})),p=f.map((function(e){return e.name})),e.abrupt("return",{id:u,names:o,pokemon:p});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=T()(function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,a,c,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get(n);case 2:return r=e.sent,a=r.pokemon.map((function(e){return U.get(e)})),e.next=6,W(a,50);case 6:return c=e.sent,i=c.filter((function(e){return"fulfilled"===e.status&&!!e.value})),u=i.map((function(e){return e.value})),e.abrupt("return",u.map((function(e){return{id:e.id,name:e.names[t],artworkUrl:e.artworkUrl,nationalDexNumber:e.nationalDexNumber}})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),J=T()(function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.Version.listAll();case 2:return n=e.sent,r=n.results.map((function(e){return A.get(e.name)})),e.next=6,Promise.all(r);case 6:return a=e.sent,c=a.filter((function(e){return!!e})),e.abrupt("return",c.filter((function(e){return e.pokedex.length>0})).filter((function(e){return Object.keys(e.names).length>0})).map((function(e){return{id:e.id,name:e.names[t],generation:e.generation,pokedex:e.pokedex}})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=T()(function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,a,c,i,u,o,l,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get(n);case 2:return r=e.sent,a=r.pokedex,c=a.map((function(e){return L.get(e)})),e.next=7,Promise.all(c);case 7:return i=e.sent,u=i.filter((function(e){return!!e})),o=u.map((function(e){return{id:e.id,name:e.names[t],pokemon:e.pokemon}})),e.next=12,I(r.generation);case 12:return l=e.sent,f={name:l.names[t],id:l.id,pokemon:l.pokemon},e.abrupt("return",[f].concat(Object(E.a)(o)));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),q=function(){function e(t){var n=t.lang,r=void 0===n?"en":n;Object(P.a)(this,e),this.language=void 0,this.language=r}return Object(D.a)(e,[{key:"getAllGames",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(this.language);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPokedexByGame",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(this.language,t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPokemonByPokedex",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(this.language,t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),K=new q({lang:"en"}),H=Object(r.createContext)(K),R=function(){return Object(r.useContext)(H)};function z(e){var t=Object(r.useState)(new q({lang:e.lang})),n=Object(l.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){c(new q({lang:e.lang}))}),[e.lang]),Object(g.jsx)(H.Provider,{value:a,children:e.children})}var Q=n(50),X=n.n(Q),Y=Object(r.createContext)(null);function Z(){var e=Object(r.useContext)(Y);if(!e)throw new Error("usePeerJS must be used within a PeerJSProvider");return e}function $(e){var t=e.children,n=e.peer;return Object(g.jsx)(Y.Provider,{value:n,children:t})}function ee(){return te.apply(this,arguments)}function te(){return(te=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=new X.a;n.on("open",(function(){e(n)})),n.on("error",(function(e){t(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=n(155),re=n(157),ae=n(77),ce=n(173),ie=n(159),ue=Object(ne.a)({root:{padding:"1rem",margin:"1rem","& *:not(:first-child)":{marginTop:"1rem"}}});function se(e){var t=ue(),n=Object(r.useContext)(w).dispatch,a=Z(),c=Object(r.useState)({name:""}),i=Object(l.a)(c,2),u=i[0],s=i[1];return Object(g.jsx)(re.a,{fixed:!0,maxWidth:"sm",children:Object(g.jsx)(ae.a,{className:t.root,children:Object(g.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit&&e.onSubmit({name:u.name}),n({type:"setUser",user:{name:u.name,id:a.id}})},children:[Object(g.jsx)(ce.a,{label:"Display Name",onChange:function(t){e.onNameChange&&e.onNameChange(t.target.value),s(Object(O.a)(Object(O.a)({},u),{},{name:t.target.value}))},value:u.name,fullWidth:!0}),Object(g.jsx)(ie.a,{type:"submit",fullWidth:!0,children:"Get Started"})]})})})}var oe=n(54),le=n(73),fe=n.n(le);function pe(e,t){return e.timestamp<t.timestamp?-1:e.timestamp>t.timestamp?1:0}var de=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new X.a;Object(P.a)(this,e),this.peer=void 0,this.state={},this.connections=new Map,this.diffStack=[],this.diffLookup=new Set,this.reducer=void 0,this.onConnectCallbacks=new Set,this.onDisconnectCallbacks=new Set,this.onChangeCallbacks=new Set,this.peer=a,this.peer.on("connection",(function(e){r.setupConnection(e)})),this.reducer=n,this.setState(t)}return Object(D.a)(e,[{key:"id",get:function(){return this.peer.id}},{key:"setState",value:function(e){this.state=e,this.onChangeCallbacks.forEach((function(t){t(e)}))}},{key:"setupConnection",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){t.on("data",function(){var e=Object(o.a)(s.a.mark((function e(r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setupMessageListener(t.peer,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.on("error",(function(e){r(e)})),t.on("close",(function(){console.log("See ya ".concat(t.peer));var e=n.connections.get(t.peer);n.onDisconnectCallbacks.forEach((function(t){t(e)})),n.connections.delete(t.peer)}));var a={lastUpdated:null,connection:t};n.connections.set(t.peer,a),n.onConnectCallbacks.forEach((function(e){e(a)})),e(a)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupMessageListener",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,a,c,i,u,o,l,f=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.type,e.next="sendUpdate"===e.t0?3:"requestInternals"===e.t0?7:"sendInternals"===e.t0?9:"sendConnections"===e.t0?15:18;break;case 3:return r=n.updates,(a=r.filter((function(e){return!f.diffLookup.has(e.id)}))).length>0&&(a.forEach((function(e){f.diffLookup.add(e.id)})),this.applyDiffs(a)),e.abrupt("break",18);case 7:return this.connections.has(t)&&(c=this.connections.get(t),i=Array.from(this.connections.keys()),u=this.diffStack,this.message(c,{type:"sendInternals",connectionIDs:i,diffStack:u})),e.abrupt("break",18);case 9:return o=n.connectionIDs.filter((function(e){return e!==f.id})).map((function(e){return f.connect(e)})),e.next=12,Promise.all(o);case 12:return this.applyDiffs(n.diffStack),n.diffStack.forEach((function(e){f.diffLookup.add(e.id)})),e.abrupt("break",18);case 15:return l=n.connections.filter((function(e){return!f.connections.has(e)})).map((function(e){return f.connect(e)})),e.next=18,Promise.all(l);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDiffsToApplyEmpty",value:function(e){return e.sort(pe)}},{key:"getDiffsToApplyMany",value:function(e){e.sort(pe);for(var t=Object(oe.a)(e),n=t[0],r=t.slice(1),a=[];this.diffStack.length>0&&this.diffStack[0].timestamp>n.timestamp;){var c=this.diffStack.shift();this.state=c.prevState,a.push(c)}return a.push(n),a.concat.apply(a,Object(E.a)(r)).sort(pe)}},{key:"applyDiffs",value:function(e){var t=this,n=[];n=0===this.diffStack.length?this.getDiffsToApplyEmpty(e):this.getDiffsToApplyMany(e);var r=this.getState();n.forEach((function(e){e.prevState=r,r=t.reducer(r,e.action),t.diffStack.unshift(e)})),this.setState(r)}},{key:"getAllDiffsSince",value:function(e){if(0===this.diffStack.length)return[];for(var t=[],n=Object(oe.a)(this.diffStack),r=n[0],a=n.slice(1);r.timestamp>e;){t.push(r);var c=a,i=Object(oe.a)(c);r=i[0],a=i.slice(1)}return t}},{key:"syncConnections",value:function(){var e=this;this.connections.forEach((function(t){var n=[];n=t.lastUpdated?e.getAllDiffsSince(t.lastUpdated):Object(E.a)(e.diffStack).reverse(),e.message(t,{type:"sendUpdate",updates:n})}))}},{key:"message",value:function(e,t){e.lastUpdated=(new Date).getTime(),e.connection.send(t)}},{key:"connect",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=n.peer.connect(t);a.on("open",Object(o.a)(s.a.mark((function t(){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.setupConnection(a);case 2:r=t.sent,c=Array.from(n.connections.keys()),n.connections.forEach((function(e){n.message(e,{type:"sendConnections",connections:c})})),e(r);case 6:case"end":return t.stop()}}),t)})))),a.on("error",(function(e){r(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clone",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect(t);case 2:n=e.sent,this.message(n,{type:"requestInternals"});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=(new Date).getTime(),n=this.peer.id,r=this.getState(),a=fe.a.encode(JSON.stringify({timestamp:t,author:n,action:e})),c={id:a,timestamp:t,author:n,action:e,prevState:r};this.diffLookup.add(a),this.applyDiffs([c]),this.syncConnections()}},{key:"getState",value:function(){return this.state}},{key:"registerOnConnect",value:function(e){this.onConnectCallbacks.add(e)}},{key:"removeOnConnect",value:function(e){this.onConnectCallbacks.delete(e)}},{key:"registerOnDisconnect",value:function(e){this.onDisconnectCallbacks.add(e)}},{key:"removeOnDisconnect",value:function(e){this.onDisconnectCallbacks.delete(e)}},{key:"registerOnChange",value:function(e){this.onChangeCallbacks.add(e)}},{key:"removeOnChange",value:function(e){this.onChangeCallbacks.delete(e)}}]),e}(),be={players:[],waiting:[]};function je(e,t){switch(t.type){case"joinWaiting":return Object(O.a)(Object(O.a)({},e),{},{waiting:[].concat(Object(E.a)(e.waiting),[t.player])});case"leaveWaiting":return Object(O.a)(Object(O.a)({},e),{},{waiting:e.waiting.filter((function(e){return e.id!==t.id}))});case"joinPlaying":var n=[];switch(e.players.length){case 0:n=[t.player];break;case 1:n=[].concat(Object(E.a)(e.players),[t.player]);break;default:throw Error("There can only be 2 players in a game")}return Object(O.a)(Object(O.a)({},e),{},{waiting:e.waiting.filter((function(e){return e.id!==t.player.id})),players:n});case"leavePlaying":var r=e.players.find((function(e){return e.id===t.id}));return r?Object(O.a)(Object(O.a)({},e),{},{waiting:[].concat(Object(E.a)(e.waiting),[r]),players:e.players.filter((function(e){return e.id!==t.id}))}):e;default:return e}}var he={name:"",columns:15,game:null,pokedex:null,tiles:[],ships:[]};function me(e,t){switch(t.type){case"setBoardName":return Object(O.a)(Object(O.a)({},e),{},{name:t.name});case"setBoardColumns":return Object(O.a)(Object(O.a)({},e),{},{columns:t.columns});case"setBoardGame":return Object(O.a)(Object(O.a)({},e),{},{game:t.game});case"setBoardPokedex":return Object(O.a)(Object(O.a)({},e),{},{pokedex:t.pokedex});case"setBoardTiles":return Object(O.a)(Object(O.a)({},e),{},{tiles:t.tiles});default:return e}}var ve={joinWaiting:function(e){return{type:"joinWaiting",player:e}},leaveWaiting:function(e){return{type:"leaveWaiting",id:e}},joinPlaying:function(e){return{type:"joinPlaying",player:e}},leavePlaying:function(e){return{type:"leavePlaying",id:e}}},Oe={setBoardName:function(e){return{type:"setBoardName",name:e}},setBoardColumns:function(e){return{type:"setBoardColumns",columns:e}},setBoardGame:function(e){return{type:"setBoardGame",game:e}},setBoardPokedex:function(e){return{type:"setBoardPokedex",pokedex:e}},setBoardTiles:function(e){return{type:"setBoardTiles",tiles:e}}};function ge(e,t){return{users:Object(O.a)({},je(e.users,t)),board:Object(O.a)({},me(e.board,t))}}function xe(e){return new de({users:be,board:he},ge,e)}var ke=Object(r.createContext)(null);function ye(){var e=function(){var e=Object(r.useContext)(ke);if(!e)throw new Error("useSharedData must be used within a SharedDataProvider");return e}(),t=Object(r.useState)(e.getState()),n=Object(l.a)(t,2),a=n[0],c=n[1];Object(r.useEffect)((function(){function t(e){c(e)}return e.registerOnChange(t),function(){return e.removeOnChange(t)}}),[e]);var i=Object(r.useCallback)(function(){var t=Object(o.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clone(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),u=Object(r.useCallback)((function(t){return e.update(t)}),[e]);return Object(r.useEffect)((function(){var t=function(e){u(ve.leaveWaiting(e.connection.peer))};return e.registerOnDisconnect(t),function(){return e.removeOnDisconnect(t)}}),[e,u]),{state:a,clone:i,update:u}}function we(e){var t=e.children,n=e.db;return Object(g.jsx)(ke.Provider,{value:n,children:t})}var Ce=n(3),Se=n(176),Pe=n(163),De=n(160),Ee=n(53),Ne=n(161),Be=n(74),Ge=Object(ne.a)({root:{display:"block",background:function(e){switch(e.variant){case"ship-unhit":return De.a[500];case"ship-hit":return Ee.a[500];case"miss":return Ne.a[50];default:return"transparent"}}},image:{display:"block"}});function Te(e){var t=e.variant,n=e.onClick,r=e.children,a=Ge({variant:t});return Object(g.jsx)("li",{className:a.root,onClick:n,children:r})}var We=Object(ne.a)({root:{display:"grid",gridTemplateColumns:function(e){return"repeat(".concat(e.columns,", max-content)")},listStyle:"none",padding:0}});function Me(e){var t=e.columns,n=e.items,r=e.renderCell,a=We({columns:t});return Object(g.jsx)("ol",{className:a.root,children:n.map((function(e){return r(e)}))})}var Ve=Object(ne.a)({root:{width:"100%",height:"100vh",overflow:"scroll"}});function Ue(e){var t=e.children,n=Ve();return Object(g.jsx)(Be.a,{className:n.root,children:t})}var Ae=["value","onChange"],Ie=["value","onChange"],Le=["getValue","getDisplayValue","value","onChange"],_e=["forGame","getValue","getDisplayValue","value","onChange"];function Je(e){var t=e.value,n=e.onChange,a=Object(Ce.a)(e,Ae),c=Object(r.useState)(null!==t&&void 0!==t?t:""),i=Object(l.a)(c,2),u=i[0],s=i[1];return Object(r.useEffect)((function(){n&&n(u)}),[u,n]),Object(g.jsx)(ce.a,Object(O.a)(Object(O.a)({},a),{},{value:u,onChange:function(e){var t=e.target.value;s(t)}}))}function Fe(e){var t=e.value,n=e.onChange,a=Object(Ce.a)(e,Ie),c=Object(r.useState)(null!==t&&void 0!==t?t:15),i=Object(l.a)(c,2),u=i[0],s=i[1];return Object(r.useEffect)((function(){n&&n(u)}),[u,n]),Object(g.jsx)(ce.a,Object(O.a)(Object(O.a)({},a),{},{type:"number",value:u,onChange:function(e){var t=e.target.value,n=Number(t);if(isNaN(n))throw Error("The value given is not a number");s(n)}}))}function qe(e){var t=e.getValue,n=e.getDisplayValue,a=void 0===n?t:n,c=e.value,i=void 0===c?null:c,u=e.onChange,f=Object(Ce.a)(e,Le),p=Object(r.useMemo)((function(){return new Map}),[]),d=R(),b=Object(r.useState)([]),j=Object(l.a)(b,2),h=j[0],m=j[1];Object(r.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getAllGames();case 2:t=e.sent,m(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[d]),Object(r.useEffect)((function(){p.clear(),h.forEach((function(e){p.set(t(e),e)}))}),[h,p,t]);var v=Object(r.useState)(i),x=Object(l.a)(v,2),k=x[0],y=x[1];Object(r.useEffect)((function(){u&&u(k)}),[k,u]);var w=Object(r.useMemo)((function(){return k?t(k):""}),[k,t]);return h.length<=0?Object(g.jsx)(ce.a,Object(O.a)(Object(O.a)({},f),{},{value:"",select:!0,disabled:!0,children:Object(g.jsx)(Se.a,{value:"",children:"Select a Game..."})})):Object(g.jsx)(ce.a,Object(O.a)(Object(O.a)({},f),{},{value:w,onChange:function(e){var t=e.target.value,n=p.get(t);if(!n)throw Error("The given value is not in the lookup table");y(n)},select:!0,children:h.map((function(e){return Object(g.jsx)(Se.a,{value:t(e),children:a(e)},t(e))}))}))}function Ke(e){var t=e.forGame,n=e.getValue,a=e.getDisplayValue,c=void 0===a?n:a,i=e.value,u=void 0===i?null:i,f=e.onChange,p=Object(Ce.a)(e,_e),d=Object(r.useMemo)((function(){return new Map}),[]),b=R(),j=Object(r.useState)([]),h=Object(l.a)(j,2),m=h[0],v=h[1],x=Object(r.useState)(u),k=Object(l.a)(x,2),y=k[0],w=k[1];Object(r.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v([]),w(null),!t){e.next=7;break}return e.next=5,b.getPokedexByGame(t);case 5:n=e.sent,v(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[b,t]),Object(r.useEffect)((function(){d.clear(),m.forEach((function(e){d.set(n(e),e)}))}),[m,d,n]),Object(r.useEffect)((function(){f&&f(y)}),[y,f]);var C=Object(r.useMemo)((function(){return y?n(y):""}),[y,n]);return m.length<=0||null===t?Object(g.jsx)(ce.a,Object(O.a)(Object(O.a)({},p),{},{value:"",select:!0,disabled:!0,children:Object(g.jsx)(Se.a,{value:"",children:"Select a Game..."})})):Object(g.jsx)(ce.a,Object(O.a)(Object(O.a)({},p),{},{value:C,onChange:function(e){var t=e.target.value,n=d.get(t);if(!n)throw Error("The given value is not in the lookup table");w(n)},select:!0,children:m.map((function(e){return Object(g.jsx)(Se.a,{value:n(e),children:c(e)},n(e))}))}))}function He(e){var t=e.forPokedex,n=e.columns,a=Object(r.useState)([]),c=Object(l.a)(a,2),i=c[0],u=c[1],f=Object(r.useState)(!1),p=Object(l.a)(f,2),d=p[0],b=p[1],j=R();return Object(r.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u([]),!t){e.next=8;break}return b(!0),e.next=5,j.getPokemonByPokedex(t);case 5:n=e.sent,u(n),b(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[j,t]),d&&m.a,Object(g.jsx)(Ue,{children:Object(g.jsx)(Me,{columns:n,items:i,renderCell:function(e){return Object(g.jsx)(Te,{variant:"unknown",children:Object(g.jsx)("img",{style:{pointerEvents:"none"},src:e.artworkUrl,alt:e.name})},e.name)}})})}var Re=Object(ne.a)({root:{padding:"1rem",maxWidth:"350px",margin:"1rem","& form > *:not(:first-child)":{marginTop:"1rem"}},image:{pointerEvents:"none"}});function ze(e){var t=e.onSubmit,n=Re(),a=C().state,c=ye().state,i=a.user?"".concat(a.user.name,"'s board"):"",u=Object(r.useState)(i),s=Object(l.a)(u,2),o=s[0],f=s[1],p=Object(r.useState)(c.board.columns),d=Object(l.a)(p,2),b=d[0],j=d[1],h=Object(r.useState)(c.board.game),m=Object(l.a)(h,2),v=m[0],O=m[1],x=Object(r.useState)(c.board.pokedex),k=Object(l.a)(x,2),y=k[0],w=k[1],S=Object(r.useMemo)((function(){return o&&b&&v&&y}),[o,b,v,y]);return Object(g.jsxs)(Pe.a,{container:!0,children:[Object(g.jsx)(Pe.a,{container:!0,item:!0,xs:2,children:Object(g.jsx)(ae.a,{className:n.root,children:Object(g.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),o&&b&&v&&y&&t)&&t({name:o,columns:b,game:v,pokedex:y})},children:[Object(g.jsx)(Je,{fullWidth:!0,label:"Board Name",onChange:function(e){f(e)},value:o}),Object(g.jsx)(Fe,{fullWidth:!0,label:"Columns",value:b,onChange:function(e){j(e)}}),Object(g.jsx)(qe,{fullWidth:!0,label:"Game",getValue:function(e){return e.id},getDisplayValue:function(e){return e.name},value:v,onChange:function(e){O(e)}}),Object(g.jsx)(Ke,{fullWidth:!0,label:"PokeDex",forGame:v,getValue:function(e){return e.id},getDisplayValue:function(e){return e.name},value:y,onChange:function(e){w(e)}}),Object(g.jsx)(ie.a,{type:"submit",fullWidth:!0,disabled:!S,children:"Get Started!"})]})})}),Object(g.jsx)(Pe.a,{container:!0,item:!0,xs:10,children:Object(g.jsx)(He,{columns:b,forPokedex:y})})]})}function Qe(){var e=C().state,t=Z(),n=ye().update,r=Object(f.f)();return e.user?Object(g.jsx)(ze,{onSubmit:function(e){var a=e.name,c=e.columns,i=e.game,u=e.pokedex;n(Oe.setBoardName(a)),n(Oe.setBoardColumns(c)),n(Oe.setBoardGame(i)),n(Oe.setBoardPokedex(u)),r.push("/".concat(t.id))}}):Object(g.jsx)(se,{onSubmit:function(e){var r={name:e.name,id:t.id};n(ve.joinWaiting(r))}})}var Xe=n(37),Ye=n(177),Ze=n(165),$e=n(166),et=n(167),tt=n(164);function nt(){var e=ye().state,t=Object(Xe.a)();return Object(g.jsx)(h.a,{display:"flex",gridGap:t.spacing(1),children:e.users.waiting.map((function(e){return Object(g.jsx)(Ye.a,{alt:e.name,children:e.name.slice(0,2)},e.id)}))})}function rt(){var e=Object(Xe.a)(),t=ye(),n=t.state,a=t.update,c=C().state,i=Object(r.useCallback)((function(e){var t=c.user;return!!t&&e.id===t.id}),[c.user]),u=Object(r.useMemo)((function(){var e=c.user;return!!e&&!!n.users.players.find((function(t){return t.id===e.id}))}),[n.users.players,c.user]),s=Object(r.useCallback)((function(){var e=c.user;e&&a(ve.joinPlaying(e))}),[c.user,a]),o=Object(r.useCallback)((function(){var e=c.user;e&&a(ve.leavePlaying(e.id))}),[c.user,a]);return Object(g.jsxs)(Pe.a,{container:!0,spacing:2,children:[!u&&Object(g.jsx)(Pe.a,{container:!0,item:!0,xs:2,component:ie.a,color:"primary",variant:"contained",startIcon:Object(g.jsx)(tt.a,{}),onClick:s,children:"Join"}),n.users.players.map((function(t){return Object(g.jsxs)(Pe.a,{container:!0,item:!0,xs:2,component:Ze.a,children:[Object(g.jsx)($e.a,{children:Object(g.jsxs)(h.a,{display:"flex",alignItems:"center",gridGap:e.spacing(1),children:[Object(g.jsx)(Ye.a,{alt:t.name,children:t.name.slice(0,2)}),Object(g.jsx)(et.a,{children:t.name})]})}),i(t)&&Object(g.jsx)(ie.a,{fullWidth:!0,onClick:o,children:Object(g.jsx)(et.a,{color:"error",children:"Leave"})})]},t.id)}))]})}var at=Object(ne.a)((function(e){return{root:{padding:e.spacing(4),"& > *:not(:first-child)":{marginTop:e.spacing(2)}},button:{margin:e.spacing(1),marginLeft:e.spacing(4)},cardGrid:{marginTop:e.spacing(2)},card:{width:"100%"}}}));function ct(){var e=at();return Object(g.jsxs)(re.a,{className:e.root,children:[Object(g.jsxs)(h.a,{component:"section",children:[Object(g.jsx)(et.a,{variant:"h6",component:"h1",children:"Hanging Out"}),Object(g.jsx)(nt,{})]}),Object(g.jsxs)(h.a,{component:"section",children:[Object(g.jsx)(h.a,{display:"flex",children:Object(g.jsx)(et.a,{variant:"h6",component:"h1",children:"Players"})}),Object(g.jsx)(Pe.a,{className:e.cardGrid,container:!0,children:Object(g.jsx)(rt,{})})]})]})}function it(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Z(),i=ye(),u=i.clone,p=i.update,d=C().state,b=Object(f.g)().peer_id;Object(r.useEffect)((function(){function e(){return(e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.id===b){e.next=3;break}return e.next=3,u(b);case 3:a(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){return a(!1)}}),[b,c.id,u]);return n?d.user?Object(g.jsx)(ct,{}):Object(g.jsx)(se,{onSubmit:function(e){var t={name:e.name,id:c.id};p(ve.joinWaiting(t))}}):Object(g.jsx)(m.a,{})}function ut(){var e=Object(r.useContext)(w).dispatch,t=Object(f.f)();return Object(g.jsx)(d.a,{position:"static",children:Object(g.jsx)(b.a,{children:Object(g.jsx)(j.a,{onClick:function(){e({type:"clear"}),t.push("/")},children:Object(g.jsx)(v.a,{})})})})}var st=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),i=Object(l.a)(c,2),u=i[0],d=i[1],b=Object(r.useState)(null),j=Object(l.a)(b,2),v=j[0],O=j[1];return Object(r.useEffect)((function(){(function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){n&&function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=xe(n),d(t)}catch(r){O(r)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),n&&u?Object(g.jsx)($,{peer:n,children:Object(g.jsx)(z,{lang:"en",children:Object(g.jsx)(we,{db:u,children:Object(g.jsx)(S,{children:Object(g.jsx)(h.a,{children:Object(g.jsxs)(p.a,{basename:"/ss-anne/",children:[Object(g.jsx)(ut,{}),Object(g.jsxs)(f.c,{children:[Object(g.jsx)(f.a,{exact:!0,path:"/",children:Object(g.jsx)(Qe,{})}),Object(g.jsx)(f.a,{exact:!0,path:"/:peer_id",children:Object(g.jsx)(it,{})})]})]})})})})})}):v?Object(g.jsx)(g.Fragment,{children:v.message}):Object(g.jsx)(m.a,{})},ot=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,179)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},lt=n(175),ft=n(172);i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsxs)(lt.b,{children:[Object(g.jsx)(ft.a,{}),Object(g.jsx)(st,{})]})}),document.getElementById("root")),ot()}},[[127,1,2]]]);
//# sourceMappingURL=main.9f314066.chunk.js.map
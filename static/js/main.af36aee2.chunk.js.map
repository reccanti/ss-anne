{"version":3,"sources":["AllTheFuckingState.tsx","utils/PromiseAllChunk.ts","utils/pokeGetter.ts","utils/CoolCache.ts","PokeGetterContext.tsx","utils/BetterSelect.tsx","Board.tsx","LandingPage.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["initialState","users","player","opponent","board","name","columns","generation","id","pokemon","reducer","state","action","type","payload","initialContext","dispatch","AllTheFuckingStateCtx","createContext","AllTheFuckingStateProvider","children","useReducer","value","Provider","PromiseAllSettledChunk","ps","a","chunkSize","pchunks","cur","length","chunk","slice","push","allRes","Promise","allSettled","res","concat","PokemonCache","key","handler","this","lookupVal","mkKey","localVal","localStorage","getItem","parsed","JSON","parse","setItem","stringify","PokeAPI","PokemonSpecies","resolve","species","defaultForm","varieties","find","variety","is_default","Pokemon","artworkUrl","sprites","front_default","names","reduce","acc","language","getAllGenerations","lang","Generaition","listAll","genList","genRequests","results","map","gen","all","genInfoDump","gens","forEach","genName","getPokemonByGeneration","generationId","currentGen","genPromises","pokePromises","pokemon_species","poke","p","get","filter","r","status","PokeGetter","initialGetter","PokeGetterContext","PokeGetterProvider","props","useState","getter","setGetter","useEffect","BetterSelect","stuffLookup","Map","data","d","set","getValue","FormControl","fullWidth","InputLabel","htmlFor","label","Select","onChange","event","target","trueValue","MenuItem","getDisplayValue","getKeyValue","useCellStyles","makeStyles","root","display","background","variant","teal","red","blueGrey","image","Cell","onClick","styles","className","useBoardStyles","gridTemplateColumns","listStyle","padding","Board","items","renderCell","item","useBoardContainerStyles","width","height","overflow","BoardContainer","Box","useCreateStyles","margin","marginTop","CreateUser","useContext","setState","Container","fixed","maxWidth","Paper","onSubmit","preventDefault","TextField","Button","BoardSetup","setGens","fetch","pokes","Grid","container","xs","component","Input","Number","src","alt","en","LandingPage","App","basename","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","StylesProvider","CssBaseline","document","getElementById"],"mappings":"kNAoCMA,EAA6B,CACjCC,MAAO,CACLC,OAAQ,KACRC,SAAU,MAEZC,MAAO,CACLC,KAAM,GACNC,QAAS,GACTC,WAAY,CACVC,GAAI,EACJH,KAAM,gBAERI,QAAS,KA8Cb,SAASC,EAAQC,EAAqBC,GACpC,OAAQA,EAAOC,MACb,IAAK,YACH,OAAO,2BACFF,GADL,IAEEV,MAAM,2BACDU,EAAMV,OADN,IAEHC,OAAQ,CACNG,KAAMO,EAAOE,QAAQT,UAK7B,IAAK,kBACH,OAAO,2BACFM,GADL,IAEEP,MAAM,2BACDO,EAAMP,OADN,IAEHE,QAASM,EAAOE,QAAQR,YAI9B,IAAK,eACH,OAAO,2BACFK,GADL,IAEEP,MAAM,2BACDO,EAAMP,OADN,IAEHC,KAAMO,EAAOE,QAAQT,SAI3B,IAAK,qBACH,OAAO,2BACFM,GADL,IAEEP,MAAM,2BACDO,EAAMP,OADN,IAEHG,WAAW,eACNK,EAAOE,aAKlB,IAAK,kBACH,OAAO,2BACFH,GADL,IAEEP,MAAM,2BACDO,EAAMP,OADN,IAEHK,QAAQ,YAAKG,EAAOE,aAI1B,QACE,OAAOH,GAab,IAAMI,EAAiC,CACrCJ,MAAOX,EACPgB,SAFqC,cAK1BC,EACXC,wBAA8BH,GAMzB,SAASI,EAAT,GAA0D,IAApBC,EAAmB,EAAnBA,SAC3C,EAA0BC,qBAAWX,EAASV,GAA9C,mBACMsB,EAAwB,CAC5BX,MAFF,KAGEK,SAHF,MAKA,OACE,cAACC,EAAsBM,SAAvB,CAAgCD,MAAOA,EAAvC,SACGF,I,8DC5KA,SAAeI,EAAtB,kC,4CAAO,WACLC,GADK,2CAAAC,EAAA,sDAOL,IALAC,EAFK,+BAEe,GAGdC,EAA0B,GAC5BC,EAAM,EACHA,EAAMJ,EAAGK,QACRC,EAAQN,EAAGO,MAAMH,EAAKA,EAAMF,GAClCC,EAAQK,KAAKF,GACbF,GAAOF,EAILO,EAAoC,GAdnC,MAeeN,EAff,gDAeMG,EAfN,eAgBeI,QAAQC,WAAWL,GAhBlC,QAgBGM,EAhBH,OAiBHH,EAASA,EAAOI,OAAOD,GAjBpB,4DAoBEH,GApBF,6C,sBCoCP,IAAMK,EAAe,IC1BrB,WAYE,WAAYC,EAAaC,GAA0B,yBAR3CD,SAQ0C,OAF1CC,aAE0C,EAChDC,KAAKF,IAAMA,EACXE,KAAKD,QAAUA,EAdnB,yCAiBE,SAAcD,GACZ,MAAM,GAAN,OAAUE,KAAKF,IAAf,YAAsBA,KAlB1B,wDAqBE,WAAUG,GAAV,qBAAAjB,EAAA,yDACQc,EAAME,KAAKE,MAAMD,KACjBE,EAAWC,aAAaC,QAAQP,IAFxC,uBAIUQ,EAASC,KAAKC,MAAML,GAJ9B,kBAKWG,GALX,uBAOoBN,KAAKD,QAAQE,GAPjC,YAOQN,EAPR,gCASIS,aAAaK,QAAQX,EAAKS,KAAKG,UAAUf,IAT7C,kBAUWA,GAVX,iDArBF,8DD0BqB,CAAuB,UAAvB,uCAAkC,WAAOhC,GAAP,yBAAAqB,EAAA,sEAC/B2B,IAAQC,eAAeC,QAAQlD,GADA,cAC/CmD,EAD+C,OAE/CC,EAAcD,EAAQE,UAAUC,MACpC,SAACC,GAAD,OAAaA,EAAQC,cAH8B,SAK/BR,IAAQS,QAAQP,QAAQE,EAAYhD,QAAQJ,MALb,cAK/CI,EAL+C,OAO/CD,EAAKC,EAAQD,GACbuD,EAAatD,EAAQuD,QAAQC,cAC7BC,EAAQV,EAAQU,MAAMC,QAAO,SAACC,EAAKvC,GAEvC,OADAuC,EAAIvC,EAAIwC,SAAShE,MAAoBwB,EAAIxB,KAClC+D,IACN,IAZkD,kBAc9C,CACL5D,KACAuD,aACAG,UAjBmD,4CAAlC,uD,SAwBNI,E,8EAAf,WAAiCC,GAAjC,qBAAA7C,EAAA,sEAEwB2B,IAAQmB,YAAYC,UAF5C,cAEQC,EAFR,OAKQC,EAAcD,EAAQE,QAAQC,KAAI,SAACC,GAAD,OACtCzB,IAAQmB,YAAYjB,QAAQuB,EAAIzE,SANpC,SAQ4B8B,QAAQ4C,IAAIJ,GARxC,cAQQK,EARR,OAWQC,EAAyB,GAC/BD,EAAYE,SAAQ,SAACJ,GACnB,IAAMK,EAAUL,EAAIZ,MAAMP,MAAK,SAACtD,GAAD,OAAUA,EAAKgE,SAAShE,OAASkE,KAC5DY,GACFF,EAAKhD,KAAK,CACR5B,KAAM8E,EAAQ9E,KACdG,GAAIsE,EAAItE,QAjBhB,kBAsBSyE,GAtBT,6C,+BAyEsBG,E,gFAAf,WACLb,EACAc,GAFK,yBAAA3D,EAAA,sDAOL,IAFI4D,EAAaD,EACXE,EAAgE,GAC/DD,EAAa,GAClBC,EAAYtD,KAAKoB,IAAQmB,YAAYjB,QAAQ+B,IAC7CA,IATG,gBAWcnD,QAAQ4C,IAAIQ,GAX1B,cAWCN,EAXD,OAaCO,EAA0C,GAChDP,EAAKC,SAAQ,SAACJ,GACZA,EAAIW,gBAAgBP,SAAQ,SAACQ,GAC3B,IAAMC,EAAIpD,EAAaqD,IAAIF,EAAKrF,MAChCmF,EAAavD,KAAK0D,SAjBjB,UAqBanE,EAAuBgE,EAAc,KArBlD,eAqBCnD,EArBD,OAsBC5B,EAAqB4B,EACxBwD,QAAO,SAACC,GAAD,MAAoB,cAAbA,EAAEC,UAEhBlB,KAAI,SAACiB,GAAD,OAAOA,EAAExE,SACbuE,QAAO,SAACH,GAAD,QAA4BA,KA1BjC,kBA4BEjF,GA5BF,6C,sBAuEA,IAAMuF,EAAb,WAGE,cAAuC,IAAD,IAAxBzB,YAAwB,MAAjB,KAAiB,2BAF9BF,cAE8B,EACpC3B,KAAK2B,SAAWE,EAJpB,4FAOE,sBAAA7C,EAAA,sEACe4C,EAAkB5B,KAAK2B,UADtC,wFAPF,iIAWE,WAA6B9D,GAA7B,SAAAmB,EAAA,sEACe0D,EAAuB1C,KAAK2B,SAAU9D,EAAWC,IADhE,wFAXF,8DE3MMyF,EAAgB,IAAID,EAAW,CAAEzB,KAAM,OAEhC2B,EAAoBhF,wBAA0B+E,GAOpD,SAASE,EAAmBC,GACjC,MAA4BC,mBAAS,IAAIL,EAAW,CAAEzB,KAAM6B,EAAM7B,QAAlE,mBAAO+B,EAAP,KAAeC,EAAf,KAMA,OAJAC,qBAAU,WACRD,EAAU,IAAIP,EAAW,CAAEzB,KAAM6B,EAAM7B,UACtC,CAAC6B,EAAM7B,OAGR,cAAC2B,EAAkB3E,SAAnB,CAA4BD,MAAOgF,EAAnC,SACGF,EAAMhF,W,gICCN,SAASqF,EAAsCL,GAAyB,IAAD,EACtEM,EAAc,IAAIC,IACxBP,EAAMQ,KAAK1B,SAAQ,SAAC2B,GAClBH,EAAYI,IAAIV,EAAMW,SAASF,GAAIA,MAgBrC,OACE,eAACG,EAAA,EAAD,CAAaC,UAAS,UAAEb,EAAMa,iBAAR,SAAtB,UACE,cAACC,EAAA,EAAD,CAAYC,QAASf,EAAM5F,GAA3B,SAAgC4F,EAAMgB,QACtC,cAACC,EAAA,EAAD,CACE7G,GAAI4F,EAAM5F,GACVc,MAAO8E,EAAMW,SAASX,EAAM9E,OAC5BgG,SAZe,SAACC,GACpB,IAAMjG,EAAQiG,EAAMC,OAAOlG,MACrBmG,EAAYf,EAAYd,IAAItE,GAClC8E,EAAMkB,SAASG,IAMb,SAKGrB,EAAMQ,KAAK/B,KAAI,SAACgC,GAAD,OACd,cAACa,EAAA,EAAD,CAAqCpG,MAAO8E,EAAMW,SAASF,GAA3D,SACGT,EAAMuB,gBAAgBd,IADVT,EAAMwB,YAAYf,Y,uCChCrCgB,EAAgBC,YAAW,CAC/BC,KAAM,CACJC,QAAS,QAETC,WAAY,SAAC7B,GACX,OAAQA,EAAM8B,SACZ,IAAK,aACH,OAAOC,IAAK,KAEd,IAAK,WACH,OAAOC,IAAI,KAEb,IAAK,OACH,OAAOC,IAAS,IAElB,QACE,MAAO,iBAKfC,MAAO,CACLN,QAAS,WAUN,SAASO,EAAT,GAA0D,IAA1CL,EAAyC,EAAzCA,QAASM,EAAgC,EAAhCA,QAASpH,EAAuB,EAAvBA,SACjCqH,EAASZ,EAAc,CAAEK,YAC/B,OACE,oBAAIQ,UAAWD,EAAOV,KAAMS,QAASA,EAArC,SACGpH,IASP,IAAMuH,GAAiBb,YAAW,CAChCC,KAAM,CACJC,QAAS,OACTY,oBAAqB,SAACxC,GAAD,uBACTA,EAAM9F,QADG,mBAGrBuI,UAAW,OACXC,QAAS,KAUN,SAASC,GAAT,GAImB,IAHxBzI,EAGuB,EAHvBA,QACA0I,EAEuB,EAFvBA,MACAC,EACuB,EADvBA,WAEMR,EAASE,GAAe,CAAErI,YAChC,OACE,oBAAIoI,UAAWD,EAAOV,KAAtB,SAA6BiB,EAAMnE,KAAI,SAACqE,GAAD,OAAUD,EAAWC,QAShE,IAAMC,GAA0BrB,YAAW,CACzCC,KAAM,SAAC3B,GAAD,cAAsC,CAC1CgD,MAAK,UAAEhD,EAAMgD,aAAR,QAAiB,OACtBC,OAAM,UAAEjD,EAAMiD,cAAR,QAAkB,QACxBC,SAAU,aAQP,SAASC,GAAT,GAA4D,IAAlCnI,EAAiC,EAAjCA,SACzBqH,EAASU,GAAwB,IACvC,OAAO,cAACK,EAAA,EAAD,CAAKd,UAAWD,EAAOV,KAAvB,SAA8B3G,IC/EvC,IAAMqI,GAAkB3B,YAAW,CACjCC,KAAM,CACJe,QAAS,OACTY,OAAQ,OACR,wBAAyB,CACvBC,UAAW,WASjB,SAASC,KACP,IAAMnB,EAASgB,KACPzI,EAAa6I,qBAAW5I,GAAxBD,SACR,EAA0BqF,mBAAoB,CAAEhG,KAAM,KAAtD,mBAAOM,EAAP,KAAcmJ,EAAd,KAkBA,OACE,cAACC,EAAA,EAAD,CAAWC,OAAK,EAACC,SAAS,KAA1B,SACE,cAACC,EAAA,EAAD,CAAOxB,UAAWD,EAAOV,KAAzB,SACE,uBAAMoC,SAZS,SAAC5C,GACpBA,EAAM6C,iBACNpJ,EAAS,CAAEH,KAAM,YAAaC,QAAS,CAAET,KAAMM,EAAMN,QACrDW,EAAS,CACPH,KAAM,eACNC,QAAS,CAAET,KAAK,GAAD,OAAKM,EAAMN,KAAX,gBAOb,UACE,cAACgK,EAAA,EAAD,CACEjD,MAAM,eACNE,SAtBe,SAACC,GACxBuC,EAAS,2BACJnJ,GADG,IAENN,KAAMkH,EAAMC,OAAOlG,UAoBbA,MAAOX,EAAMN,KACb4G,WAAS,IAEX,cAACqD,EAAA,EAAD,CAAQzJ,KAAK,SAASoG,WAAS,EAA/B,gCAaV,IAAM0B,GAAiBb,YAAW,CAChCC,KAAM,CACJe,QAAS,OACTmB,SAAU,QACVP,OAAQ,OACR,0BAA2B,CACzBC,UAAW,WAKjB,SAASY,KACP,MAAwBlE,mBAA2B,IAAnD,mBAAOpB,EAAP,KAAauF,EAAb,KAEA,EAA4BX,qBAAW5I,GAA/BN,EAAR,EAAQA,MAAOK,EAAf,EAAeA,SACTsF,EAASuD,qBAAW3D,GAEpBuC,EAASE,KAgCf,OAhBAnC,qBAAU,YACG,uCAAG,4BAAA9E,EAAA,sEACO4E,EAAOhC,oBADd,OACNW,EADM,OAEZuF,EAAQvF,GAFI,2CAAH,qDAIXwF,KACC,CAACnE,IAEJE,qBAAU,YACG,uCAAG,4BAAA9E,EAAA,sEACQ4E,EAAOlB,uBAAuBzE,EAAMP,MAAMG,YADlD,OACNmK,EADM,OAEZ1J,EAAS,CAAEH,KAAM,kBAAmBC,QAAS4J,IAFjC,2CAAH,qDAIXD,KACC,CAACnE,EAAQtF,EAAUL,EAAMP,MAAMG,aAGhC,eAACoK,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAMC,WAAS,EAAC1B,MAAI,EAAC2B,GAAI,EAAzB,SACE,eAACX,EAAA,EAAD,CAAOY,UAAU,OAAOpC,UAAWD,EAAOV,KAA1C,UACE,cAACsC,EAAA,EAAD,CACEpD,WAAS,EACTG,MAAM,aACNE,SArCe,SAACC,GACxB,IAAMlH,EAAOkH,EAAMC,OAAOlG,MAC1BN,EAAS,CAAEH,KAAM,eAAgBC,QAAS,CAAET,WAoCpCiB,MAAOX,EAAMP,MAAMC,OAErB,eAAC2G,EAAA,EAAD,CAAaC,WAAS,EAAtB,UACE,cAACC,EAAA,EAAD,CAAYC,QAAQ,eAApB,qBACA,cAAC4D,EAAA,EAAD,CACEvK,GAAG,eACHK,KAAK,SACLyG,SAxCe,SAACC,GAC1B,IAAMjH,EAAU0K,OAAOzD,EAAMC,OAAOlG,OACpCN,EAAS,CAAEH,KAAM,kBAAmBC,QAAS,CAAER,cAuCrCgB,MAAOX,EAAMP,MAAME,aAGvB,cAACmG,EAAD,CACEjG,GAAG,aACH4G,MAAM,aACNH,WAAS,EACTL,KAAM3B,EACN3D,MAAOX,EAAMP,MAAMG,WACnBoH,gBAAiB,SAACd,GAAD,OAAOA,EAAExG,MAC1BuH,YAAa,SAACf,GAAD,OAAOA,EAAExG,MACtB0G,SAAU,SAACF,GAAD,OAAOA,EAAErG,IACnB8G,SAhDc,SAACxC,GACvB9D,EAAS,CAAEH,KAAM,qBAAsBC,QAASgE,YAmD9C,cAAC6F,EAAA,EAAD,CAAMC,WAAS,EAAC1B,MAAI,EAAC2B,GAAI,GAAzB,SACE,cAACtB,GAAD,UACE,cAACR,GAAD,CACEzI,QAASK,EAAMP,MAAME,QACrB0I,MAAOrI,EAAMP,MAAMK,QACnBwI,WAAY,SAACC,GAAD,OACV,cAACX,EAAD,CAA0BL,QAAQ,UAAlC,SACE,qBAAK+C,IAAK/B,EAAKnF,WAAYmH,IAAKhC,EAAKhF,MAAMiH,MADlCjC,EAAKhF,MAAMiH,cAW7B,SAASC,KAEd,OADkBvB,qBAAW5I,GAArBN,MACEV,MAAMC,OACP,cAACqK,GAAD,IAEF,cAACX,GAAD,IC9IMyB,OA9Bf,WACE,OAOE,aANA,CAMClK,EAAD,UACE,cAACgF,EAAD,CAAoB5B,KAAK,KAAzB,SASE,cAAC,IAAD,CAAQ+G,SAAS,WAAjB,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOC,OAAK,EAACC,KAAK,IAAlB,SACE,cAACJ,GAAD,eChCCK,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,oBCFdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,eAACC,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,IACA,cAAC,GAAD,SAGJC,SAASC,eAAe,SAM1Bf,M","file":"static/js/main.af36aee2.chunk.js","sourcesContent":["/**\n * @TODO - Here it is, all the fucking state! I can't think\n * of a better way to structure this right now, so I\n * won't. In time, it will probably be better to start\n * breaking this out into separate state managers, for\n * organization as much as performance\n *\n * ~reccanti 6/19/2021\n */\nimport { createContext, ReactNode, useReducer } from \"react\";\nimport { Pokemon, PokeGeneration } from \"./utils/pokeGetter\";\n\n// various types for interacting with state\n\ninterface User {\n  name: string;\n}\n\ninterface BoardConfig {\n  name: string;\n  columns: number;\n  generation: PokeGeneration;\n  pokemon: Pokemon[];\n}\n\n// compose all our types into a state blob. Create the reducer\n// and action for managing this\n\ninterface FuckingState {\n  users: {\n    player: User | null;\n    opponent: User | null;\n  };\n  board: BoardConfig;\n}\n\nconst initialState: FuckingState = {\n  users: {\n    player: null,\n    opponent: null,\n  },\n  board: {\n    name: \"\",\n    columns: 15,\n    generation: {\n      id: 1,\n      name: \"Generation I\",\n    },\n    pokemon: [],\n  },\n};\n\ninterface BaseAction {\n  type: string;\n}\n\ninterface SetPlayer extends BaseAction {\n  type: \"setPlayer\";\n  payload: {\n    name: string;\n  };\n}\n\ninterface SetBoardName extends BaseAction {\n  type: \"setBoardName\";\n  payload: {\n    name: string;\n  };\n}\n\ninterface SetBoardColumns extends BaseAction {\n  type: \"setBoardColumns\";\n  payload: {\n    columns: number;\n  };\n}\n\ninterface SetBoardGeneration extends BaseAction {\n  type: \"setBoardGeneration\";\n  payload: PokeGeneration;\n}\n\ninterface SetBoardPokemon extends BaseAction {\n  type: \"setBoardPokemon\";\n  payload: Pokemon[];\n}\n\ntype Action =\n  | SetPlayer\n  | SetBoardName\n  | SetBoardColumns\n  | SetBoardGeneration\n  | SetBoardPokemon;\n\nfunction reducer(state: FuckingState, action: Action): FuckingState {\n  switch (action.type) {\n    case \"setPlayer\": {\n      return {\n        ...state,\n        users: {\n          ...state.users,\n          player: {\n            name: action.payload.name,\n          },\n        },\n      };\n    }\n    case \"setBoardColumns\": {\n      return {\n        ...state,\n        board: {\n          ...state.board,\n          columns: action.payload.columns,\n        },\n      };\n    }\n    case \"setBoardName\": {\n      return {\n        ...state,\n        board: {\n          ...state.board,\n          name: action.payload.name,\n        },\n      };\n    }\n    case \"setBoardGeneration\": {\n      return {\n        ...state,\n        board: {\n          ...state.board,\n          generation: {\n            ...action.payload,\n          },\n        },\n      };\n    }\n    case \"setBoardPokemon\": {\n      return {\n        ...state,\n        board: {\n          ...state.board,\n          pokemon: [...action.payload],\n        },\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n\n// combine the state blob with a dispatch function and actions\n// to create the context and Provider\n\ninterface FuckingContext {\n  state: FuckingState;\n  dispatch: (action: Action) => void;\n}\n\nconst initialContext: FuckingContext = {\n  state: initialState,\n  dispatch() {},\n};\n\nexport const AllTheFuckingStateCtx =\n  createContext<FuckingContext>(initialContext);\n\ninterface Props {\n  children: ReactNode;\n}\n\nexport function AllTheFuckingStateProvider({ children }: Props) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value: FuckingContext = {\n    state,\n    dispatch,\n  };\n  return (\n    <AllTheFuckingStateCtx.Provider value={value}>\n      {children}\n    </AllTheFuckingStateCtx.Provider>\n  );\n}\n","/**\n * A drop-in replacement for Promise.all, except you can specify a chunk size.\n * This way, you can chunk your requests so that you don't overwhelm the API.\n *\n * @METEORCITY_CANDIDATE\n * - maybe make \"options\" instead of passing the chunksize as a full parameter\n */\nexport async function PromiseAllSettledChunk<T>(\n  ps: Promise<T>[],\n  chunkSize: number = 25\n): Promise<PromiseSettledResult<T>[]> {\n  // split the array into chunks\n  const pchunks: Promise<T>[][] = [];\n  let cur = 0;\n  while (cur < ps.length) {\n    const chunk = ps.slice(cur, cur + chunkSize);\n    pchunks.push(chunk);\n    cur += chunkSize;\n  }\n\n  // asynchronously iterate through each chunk and add the results\n  let allRes: PromiseSettledResult<T>[] = [];\n  for (const chunk of pchunks) {\n    const res = await Promise.allSettled(chunk);\n    allRes = allRes.concat(res);\n  }\n\n  return allRes;\n}\n","/**\n * This is kind of an extension of what I started with pokeFuncs.\n * The goal here is to create an wrapper around the PokeAPI that can\n * be used to simplify the process of fetching pokemon and formatting\n * it in the way I'd like.\n *\n * @TODO - Even though pokeapi-typescript caches our API requests,\n * we might want to pull all this down and host all the data locally.\n * By having this Getter, we can preserve the API our app uses while\n * swapping out the data source\n */\nimport PokeAPI, { IPokemonSpeciesVariety } from \"pokeapi-typescript\";\nimport { CoolCache } from \"./CoolCache\";\nimport { PromiseAllSettledChunk } from \"./PromiseAllChunk\";\n\nexport type Language =\n  | \"ja-Hrkt\"\n  | \"roomaji\"\n  | \"ko\"\n  | \"zh-Hant\"\n  | \"fr\"\n  | \"de\"\n  | \"es\"\n  | \"it\"\n  | \"en\"\n  | \"cs\"\n  | \"ja\"\n  | \"zh-Hans\"\n  | \"pt-BR\";\n\nexport interface Pokemon {\n  id: number;\n  artworkUrl: string;\n  names: {\n    [lang in Language]: string;\n  };\n}\n\nexport interface PokeGeneration {\n  name: string;\n  id: number;\n}\n\nconst PokemonCache = new CoolCache<Pokemon>(\"pokemon\", async (name: string) => {\n  const species = await PokeAPI.PokemonSpecies.resolve(name);\n  const defaultForm = species.varieties.find(\n    (variety) => variety.is_default\n  ) as IPokemonSpeciesVariety;\n  const pokemon = await PokeAPI.Pokemon.resolve(defaultForm.pokemon.name);\n\n  const id = pokemon.id;\n  const artworkUrl = pokemon.sprites.front_default;\n  const names = species.names.reduce((acc, cur) => {\n    acc[cur.language.name as Language] = cur.name;\n    return acc;\n  }, {} as { [lang in Language]: string });\n\n  return {\n    id,\n    artworkUrl,\n    names,\n  };\n});\n\n/**\n * Fetch all the Pokemon generations\n */\nasync function getAllGenerations(lang: Language): Promise<PokeGeneration[]> {\n  // list out all the generations\n  const genList = await PokeAPI.Generaition.listAll();\n\n  // get info from all of the generations\n  const genRequests = genList.results.map((gen) =>\n    PokeAPI.Generaition.resolve(gen.name)\n  );\n  const genInfoDump = await Promise.all(genRequests);\n\n  // parse out that info into a list of our generations\n  const gens: PokeGeneration[] = [];\n  genInfoDump.forEach((gen) => {\n    const genName = gen.names.find((name) => name.language.name === lang);\n    if (genName) {\n      gens.push({\n        name: genName.name,\n        id: gen.id,\n      });\n    }\n  });\n\n  return gens;\n}\n\n/**\n * Get info on all the pokemon available in each generation\n *\n * @TODO - This logic is incomplete and probably bad. I think this\n * is the flow I'd like to encourage:\n *\n * 1. Select the game you're playing\n * 2. Use that to find the version group\n * 3. Use that to find the generation\n * 4. Find all the pokemon-species in that generation\n * 5. Get the names of all the varieties of that species\n * 6. Look up all those varieties\n *\n * This is kind of unmanegeable in it's current form. I think\n * what I'd like to do is create a \"Cache\" layer that will look\n * something like this:\n *\n * {\n *   pokemon: {...},\n *   games: {...}\n * }\n *\n * The cache will work like this:\n *\n * ```\n * Cache.get(\"pokemon\").get(\"crobat\")\n * ```\n *\n * or\n *\n * ```\n * Cache.get(\"games\").get(\"pokemon\")\n * ```\n *\n * It will work like this:\n *\n * 1. Does that request exist as a memoized value in the cache?\n *    If so, return that\n * 2. Does the entry exist in the cache? If so, lookup the value\n *    and return that\n * 3. Otherwise, make a request to the PokeAPI, store the value\n *    in localstorage, and then return the result\n *\n * Maybe multiple Caches for each type would be easier to implement\n * and manage?\n *\n * ~reccanti 6/22/21\n */\nexport async function getPokemonByGeneration(\n  lang: Language,\n  generationId: number\n): Promise<Pokemon[]> {\n  // based on the generation, cycle backward to get all the pokemon\n  let currentGen = generationId;\n  const genPromises: ReturnType<typeof PokeAPI.Generaition.resolve>[] = [];\n  while (currentGen > 0) {\n    genPromises.push(PokeAPI.Generaition.resolve(currentGen));\n    currentGen--;\n  }\n  const gens = await Promise.all(genPromises);\n\n  const pokePromises: Promise<Pokemon | void>[] = [];\n  gens.forEach((gen) => {\n    gen.pokemon_species.forEach((poke) => {\n      const p = PokemonCache.get(poke.name);\n      pokePromises.push(p);\n    });\n  });\n\n  const res = await PromiseAllSettledChunk(pokePromises, 100);\n  const pokemon: Pokemon[] = res\n    .filter((r) => r.status === \"fulfilled\")\n    // @ts-ignore\n    .map((r) => r.value)\n    .filter((poke: Pokemon | void) => !!poke);\n\n  return pokemon;\n\n  // get the basic list of pokemon introduced in each generation\n  // const pokePromises: Promise<[IPokemon, IPokemonSpecies]>[] = [];\n  // gens.forEach((gen) => {\n  //   gen.pokemon_species.forEach((poke) => {\n  //     const p = PokeAPI.Pokemon.resolve(poke.name);\n  //     const ps = PokeAPI.PokemonSpecies.resolve(poke.name);\n  //     const pps = Promise.all([p, ps]);\n  //     pokePromises.push(pps);\n  //   });\n  // });\n  // const pokes = await PromiseAllSettledChunk(pokePromises, 100);\n\n  // // format this data into the Pokemon type\n  // const pokemon: Pokemon[] = [];\n  // pokes.forEach((res) => {\n  //   if (res.status === \"fulfilled\") {\n  //     const [poke, species] = res.value;\n  //     // const name = poke.name;\n  //     const nameResource = species.names.find(\n  //       (name) => name.language.name === lang\n  //     );\n  //     if (nameResource) {\n  //       const name = nameResource.name;\n  //       const id = poke.id;\n  //       const artworkUrl = poke.sprites.front_default;\n  //       pokemon.push({\n  //         name,\n  //         id,\n  //         artworkUrl,\n  //       });\n  //     }\n  //   }\n  // });\n\n  // return pokemon;\n}\n\ninterface Options {\n  lang: Language;\n}\n\nexport class PokeGetter {\n  private language: Language;\n\n  constructor({ lang = \"en\" }: Options) {\n    this.language = lang;\n  }\n\n  async getAllGenerations(): Promise<PokeGeneration[]> {\n    return await getAllGenerations(this.language);\n  }\n\n  async getPokemonByGeneration(generation: PokeGeneration) {\n    return await getPokemonByGeneration(this.language, generation.id);\n  }\n}\n","/**\n * A cool cache for cool people 😎. This cache\n * wraps around API calls and caches the results\n * in localStorage\n *\n * @METEORCITY_CANDIDATE\n * - I don't really like the Promise<T | void> signature.\n *   Maybe come up with some sort of CacheResponse type?\n * - better error handling\n */\n\n/**\n * A function that will be used to fetch a value if it isn't\n * stored in the cache already\n */\ntype LookerUpper<T> = (lookupVal: string) => T | Promise<T | void>;\n\nexport class CoolCache<T> {\n  /**\n   * This key will be used to identify the resource in localStorage\n   */\n  private key: string;\n\n  /**\n   * This will be used to look up the value if it isn't available\n   * in localStorage\n   */\n  private handler: LookerUpper<T>;\n\n  constructor(key: string, handler: LookerUpper<T>) {\n    this.key = key;\n    this.handler = handler;\n  }\n\n  private mkKey(key: string): string {\n    return `${this.key}.${key}`;\n  }\n\n  async get(lookupVal: string): Promise<T | void> {\n    const key = this.mkKey(lookupVal);\n    const localVal = localStorage.getItem(key);\n    if (localVal) {\n      const parsed = JSON.parse(localVal) as T;\n      return parsed;\n    }\n    const res = await this.handler(lookupVal);\n    if (res) {\n      localStorage.setItem(key, JSON.stringify(res));\n      return res;\n    }\n  }\n}\n","/**\n * A context that provides a wrapper aound the PokeGetter\n * so that we don't have to reinitialize it everywhere\n */\n\nimport { createContext, useState, useEffect, ReactNode } from \"react\";\nimport { PokeGetter, Language } from \"./utils/pokeGetter\";\n\nconst initialGetter = new PokeGetter({ lang: \"en\" });\n\nexport const PokeGetterContext = createContext<PokeGetter>(initialGetter);\n\ninterface Props {\n  children: ReactNode;\n  lang: Language;\n}\n\nexport function PokeGetterProvider(props: Props) {\n  const [getter, setGetter] = useState(new PokeGetter({ lang: props.lang }));\n\n  useEffect(() => {\n    setGetter(new PokeGetter({ lang: props.lang }));\n  }, [props.lang]);\n\n  return (\n    <PokeGetterContext.Provider value={getter}>\n      {props.children}\n    </PokeGetterContext.Provider>\n  );\n}\n","/**\n * I just want to use objects for Select values. Is that so\n * much to ask for???\n *\n * @METEORCITY_CANDIDATE\n * - Need to make this entirely hook-based, so it isn't dependent on\n *   any particular UI theme\n * - Probably need to figure out that change event type\n */\n\nimport { Select, FormControl, InputLabel, MenuItem } from \"@material-ui/core\";\n\ninterface Props<DataType> {\n  // these are all things that will be passed to the UI elements\n  id: string;\n  label: string;\n  fullWidth?: boolean;\n\n  // these are all things for interacting with complex data\n  data: DataType[];\n  getDisplayValue: (data: DataType) => string;\n  getKeyValue: (data: DataType) => string | number;\n  getValue: (data: DataType) => string | number;\n  onChange: (data: DataType) => void;\n  value: DataType;\n}\n\nexport function BetterSelect<DataType extends object>(props: Props<DataType>) {\n  const stuffLookup = new Map<string | number, DataType>();\n  props.data.forEach((d) => {\n    stuffLookup.set(props.getValue(d), d);\n  });\n\n  /**\n   * @NOTE - this is bleh but the type for the Select component's\n   * onChange function is stupid and I don't want to replicate it.\n   * There'll be a value, so who cares\n   *\n   * ~reccanti 6/20/2021\n   */\n  const handleChange = (event: any) => {\n    const value = event.target.value;\n    const trueValue = stuffLookup.get(value) as DataType;\n    props.onChange(trueValue);\n  };\n\n  return (\n    <FormControl fullWidth={props.fullWidth ?? false}>\n      <InputLabel htmlFor={props.id}>{props.label}</InputLabel>\n      <Select\n        id={props.id}\n        value={props.getValue(props.value)}\n        onChange={handleChange}\n      >\n        {props.data.map((d) => (\n          <MenuItem key={props.getKeyValue(d)} value={props.getValue(d)}>\n            {props.getDisplayValue(d)}\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n}\n","/**\n * This contains the presentation components for the Board and the\n * tiles on the board.\n *\n * Tiles can exist in the following states:\n * - not yet guessed\n * - missed\n * - an \"unhit\" ship\n * - a \"hit\" ship\n *\n * There should be no game-logic in these components. How you manage that\n * is up to you.\n */\nimport { ReactNode, SyntheticEvent } from \"react\";\nimport { makeStyles, Box } from \"@material-ui/core\";\nimport { blueGrey, red, teal } from \"@material-ui/core/colors\";\n\nexport type CellVariant = \"ship-hit\" | \"ship-unhit\" | \"miss\" | \"unknown\";\n\ninterface CellStyleProps {\n  variant: CellVariant;\n}\n\nconst useCellStyles = makeStyles({\n  root: {\n    display: \"block\",\n    // padding: \"0.5rem\",\n    background: (props: CellStyleProps) => {\n      switch (props.variant) {\n        case \"ship-unhit\": {\n          return teal[\"500\"];\n        }\n        case \"ship-hit\": {\n          return red[\"500\"];\n        }\n        case \"miss\": {\n          return blueGrey[\"50\"];\n        }\n        default: {\n          return \"transparent\";\n        }\n      }\n    },\n  },\n  image: {\n    display: \"block\",\n  },\n});\n\ninterface CellProps {\n  variant: CellVariant;\n  onClick?: (e: SyntheticEvent<HTMLLIElement>) => void;\n  children: ReactNode;\n}\n\nexport function Cell({ variant, onClick, children }: CellProps) {\n  const styles = useCellStyles({ variant });\n  return (\n    <li className={styles.root} onClick={onClick}>\n      {children}\n    </li>\n  );\n}\n\ninterface BoardStyleProps {\n  columns: number;\n}\n\nconst useBoardStyles = makeStyles({\n  root: {\n    display: \"grid\",\n    gridTemplateColumns: (props: BoardStyleProps) =>\n      `repeat(${props.columns}, max-content)`,\n    // gridGap: \"0.5rem\",\n    listStyle: \"none\",\n    padding: 0,\n  },\n});\n\ninterface BoardProps<DataType> {\n  columns: number;\n  items: DataType[];\n  renderCell: (data: DataType) => ReactNode;\n}\n\nexport function Board<DataType extends object>({\n  columns,\n  items,\n  renderCell,\n}: BoardProps<DataType>) {\n  const styles = useBoardStyles({ columns });\n  return (\n    <ol className={styles.root}>{items.map((item) => renderCell(item))}</ol>\n  );\n}\n\ninterface BoardContainerStyleProps {\n  height?: number | string;\n  width?: number | string;\n}\n\nconst useBoardContainerStyles = makeStyles({\n  root: (props: BoardContainerStyleProps) => ({\n    width: props.width ?? \"100%\",\n    height: props.height ?? \"100vh\",\n    overflow: \"scroll\",\n  }),\n});\n\ninterface BoardContainerProps {\n  children: ReactNode;\n}\n\nexport function BoardContainer({ children }: BoardContainerProps) {\n  const styles = useBoardContainerStyles({});\n  return <Box className={styles.root}>{children}</Box>;\n}\n","/**\n * This is the landing page for the application. This is where the\n * user sets their username and launches their instance. I'm modeling\n * it basically on the landing screen for https://skribbl.io/ since\n * I think it does a really good job!\n */\n\nimport {\n  Paper,\n  Container,\n  TextField,\n  Button,\n  makeStyles,\n  FormControl,\n  Input,\n  InputLabel,\n  Grid,\n} from \"@material-ui/core\";\nimport { useContext, useState, ChangeEvent, FormEvent, useEffect } from \"react\";\nimport { AllTheFuckingStateCtx } from \"./AllTheFuckingState\";\nimport { PokeGetterContext } from \"./PokeGetterContext\";\nimport { PokeGeneration } from \"./utils/pokeGetter\";\nimport { BetterSelect } from \"./utils/BetterSelect\";\nimport { BoardContainer, Board, Cell } from \"./Board\";\n\n/**\n * This is a sub-page of the landing page. Here, we ask the user to\n * select a username before either creating their board or joining\n * someone at a particular instance.\n *\n * @TODO - right now, we only allow the user to create a new board.\n * Users will be able to join directly using a URL provided by the\n * other player once their board is created.\n *\n * ~reccanti 6/20/2021\n */\nconst useCreateStyles = makeStyles({\n  root: {\n    padding: \"1rem\",\n    margin: \"1rem\",\n    \"& *:not(:first-child)\": {\n      marginTop: \"1rem\",\n    },\n  },\n});\n\ninterface FormState {\n  name: string;\n}\n\nfunction CreateUser() {\n  const styles = useCreateStyles();\n  const { dispatch } = useContext(AllTheFuckingStateCtx);\n  const [state, setState] = useState<FormState>({ name: \"\" });\n\n  const handleNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setState({\n      ...state,\n      name: event.target.value,\n    });\n  };\n\n  const handleSubmit = (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    dispatch({ type: \"setPlayer\", payload: { name: state.name } });\n    dispatch({\n      type: \"setBoardName\",\n      payload: { name: `${state.name}'s board` },\n    });\n  };\n\n  return (\n    <Container fixed maxWidth=\"sm\">\n      <Paper className={styles.root}>\n        <form onSubmit={handleSubmit}>\n          <TextField\n            label=\"Display Name\"\n            onChange={handleNameChange}\n            value={state.name}\n            fullWidth\n          />\n          <Button type=\"submit\" fullWidth>\n            Get Started\n          </Button>\n        </form>\n      </Paper>\n    </Container>\n  );\n}\n\n/**\n * This is where we'll set up the board for an upcoming game\n */\n\nconst useBoardStyles = makeStyles({\n  root: {\n    padding: \"1rem\",\n    maxWidth: \"350px\",\n    margin: \"1rem\",\n    \"& > *:not(:first-child)\": {\n      marginTop: \"1rem\",\n    },\n  },\n});\n\nfunction BoardSetup() {\n  const [gens, setGens] = useState<PokeGeneration[]>([]);\n\n  const { state, dispatch } = useContext(AllTheFuckingStateCtx);\n  const getter = useContext(PokeGetterContext);\n\n  const styles = useBoardStyles();\n\n  const handleNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const name = event.target.value;\n    dispatch({ type: \"setBoardName\", payload: { name } });\n  };\n\n  const handleColumnChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const columns = Number(event.target.value);\n    dispatch({ type: \"setBoardColumns\", payload: { columns } });\n  };\n\n  const handleGenChange = (gen: PokeGeneration) => {\n    dispatch({ type: \"setBoardGeneration\", payload: gen });\n  };\n\n  useEffect(() => {\n    const fetch = async () => {\n      const gens = await getter.getAllGenerations();\n      setGens(gens);\n    };\n    fetch();\n  }, [getter]);\n\n  useEffect(() => {\n    const fetch = async () => {\n      const pokes = await getter.getPokemonByGeneration(state.board.generation);\n      dispatch({ type: \"setBoardPokemon\", payload: pokes });\n    };\n    fetch();\n  }, [getter, dispatch, state.board.generation]);\n\n  return (\n    <Grid container>\n      <Grid container item xs={2}>\n        <Paper component=\"form\" className={styles.root}>\n          <TextField\n            fullWidth\n            label=\"Board Name\"\n            onChange={handleNameChange}\n            value={state.board.name}\n          />\n          <FormControl fullWidth>\n            <InputLabel htmlFor=\"column-input\">Columns</InputLabel>\n            <Input\n              id=\"column-input\"\n              type=\"number\"\n              onChange={handleColumnChange}\n              value={state.board.columns}\n            />\n          </FormControl>\n          <BetterSelect\n            id=\"gen-select\"\n            label=\"Generation\"\n            fullWidth\n            data={gens}\n            value={state.board.generation}\n            getDisplayValue={(d) => d.name}\n            getKeyValue={(d) => d.name}\n            getValue={(d) => d.id}\n            onChange={handleGenChange}\n          />\n        </Paper>\n      </Grid>\n      <Grid container item xs={10}>\n        <BoardContainer>\n          <Board\n            columns={state.board.columns}\n            items={state.board.pokemon}\n            renderCell={(item) => (\n              <Cell key={item.names.en} variant=\"unknown\">\n                <img src={item.artworkUrl} alt={item.names.en} />\n              </Cell>\n            )}\n          />\n        </BoardContainer>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport function LandingPage() {\n  const { state } = useContext(AllTheFuckingStateCtx);\n  if (state.users.player) {\n    return <BoardSetup />;\n  }\n  return <CreateUser />;\n}\n","import { AllTheFuckingStateProvider } from \"./AllTheFuckingState\";\nimport { PokeGetterProvider } from \"./PokeGetterContext\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport \"./App.css\";\nimport { LandingPage } from \"./LandingPage\";\n\n/**\n * Let's start thinking about the \"App State\". These will be the various\n * different phases of using this application. Each phase could probably\n * be considered a mini-application\n *\n * 1. Setup - This is where you set up the board, establishing the shape\n * of the board and the order the pokemon appear in\n *\n * 2. Connection - Once the board is configured, we'll try to connect to\n * another instance that we can pass that data along to. Maybe this could\n * happen in the background of other phases?\n *\n * 3. Game - This probably consists of several sub-phases, such as ship\n * placement and actual play\n *\n * 4. PostGame - After a player wins, what happens? Do we just return to\n * the main phase or give people a chance to do another round?\n */\nfunction App() {\n  return (\n    // <WebRTCProvider>\n    //   <SetupProvider>\n    //     <Connector />\n    //     <Loader />\n    //   </SetupProvider>\n    // </WebRTCProvider>\n    <AllTheFuckingStateProvider>\n      <PokeGetterProvider lang=\"en\">\n        {/**\n         * @TODO - instead of hard-coding this, it might be better\n         * to do some fancy logic to determine what the base-url\n         * actually is. This way, localhost:3000/ and reccanti.github.io/ss-anne\n         * would both work\n         *\n         * ~reccanti 6/22/2021\n         */}\n        <Router basename=\"/ss-anne\">\n          <Switch>\n            <Route exact path=\"/\">\n              <LandingPage />\n            </Route>\n          </Switch>\n        </Router>\n      </PokeGetterProvider>\n    </AllTheFuckingStateProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { CssBaseline, StylesProvider } from \"@material-ui/core\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <StylesProvider>\n      <CssBaseline />\n      <App />\n    </StylesProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}